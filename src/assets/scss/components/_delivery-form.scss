.form {
  $form-column-gap: $container-padding-x;

  margin-top: 35px;
  margin-bottom: 50px;

  &__section {
   margin-bottom: 50px;
  }

  &__fieldset {
    margin: 0;
    display: grid;
    grid-row-gap: 15px;
    align-self: start;
  }

  &__fieldset dd {
    margin-left: 30px;
    width: 240px;
    // border: 1px solid red;
  }

  &__fieldset--delivery {
    $areas: label-from, select-from, label-to, select-to, form-refresh, switcher-from, switcher-to, details-from, details-to;
    $template-columns-md: repeat(2, 1fr) 40px repeat(2, 1fr);
    $template-areas-md: 
      "label-from label-from . label-to label-to"
      "select-from select-from form-refresh select-to select-to"
      "switcher-from switcher-from . switcher-to switcher-to"
      "details-from details-from . details-to details-to";
    $details-top-md: 20px;
    $label-top-md: 0;

    @for $i from 1 through length($areas) {
      & > *:nth-child(#{$i}) {
        grid-area: nth($areas, $i);
      }
    }

    padding-bottom: 40px;
    display: grid;
    grid-template-columns: 1fr auto;
    grid-template-areas:
      "label-from label-from"
      "select-from select-from"
      "switcher-from switcher-from"
      "details-from details-from"
      "label-to form-refresh"
      "select-to select-to"
      "switcher-to switcher-to"
      "details-to details-to";
    border-bottom: 3px solid #F2F2F2;

    @include media-breakpoint-only(md) {
      grid-template-columns: $template-columns-md;
      grid-template-areas: $template-areas-md;
    }

    @include media-breakpoint-up(xl) {
      grid-template-columns: $template-columns-md;
      grid-template-areas: $template-areas-md;
    }

    & > *:nth-child(#{index($areas, details-from)}),
    & > *:nth-child(#{index($areas, details-to)}) {
      margin-top: 7px;

      @include media-breakpoint-only(md) {
        margin-top: $details-top-md;
      }

      @include media-breakpoint-up(xl) {
        margin-top: $details-top-md;
      }
    }

    & > *:nth-child(#{index($areas, label-to)}) {
      margin-top: 15px;

      @include media-breakpoint-only(md) {
        margin-top: $label-top-md;
      }

      @include media-breakpoint-up(xl) {
        margin-top: $label-top-md;
      }
    }
  }

  &__fieldset--department {
    $template-columns: auto 1fr;
    $column-gap: $form-column-gap * 2;

    @include media-breakpoint-only(sm) {
      grid-template-columns: $template-columns;
      grid-column-gap: $column-gap;
    }

    @include media-breakpoint-only(lg) {
      grid-template-columns: $template-columns;
      grid-column-gap: $column-gap;
    }
  }

  &__fieldset--address {
    grid-template-columns: 1fr 100px;
    grid-column-gap: 20px;
    align-items: end;

    @include media-breakpoint-up(md) {
      grid-column-gap: $form-column-gap * 2;
    }

    & > .form__field:first-child {
      grid-column: 1 / -1;
    }
  }

  &__fieldset--schedule {
    margin-top: 25px;
    display: grid;
    grid-template-columns: auto 1fr;
    grid-column-gap: $form-column-gap * 2;
    grid-row-gap: 10px;
    grid-column: 1 / -1;

    & > *:first-child {
      grid-column: 1 / -1;
    }
  }

  &__fieldset--tags {
    margin-bottom: 30px;
    display: flex;
    flex-wrap: wrap;
    grid-row-gap: 0;
  }

  &__fieldset--goods-type {
    $template-columns-md: 125px repeat(4, auto);

    margin-bottom: 30px;
    display: grid;
    grid-template-columns: repeat(2, auto);
    justify-content: start;
    align-items: center;
    grid-column-gap: $form-column-gap * 2;

    @include media-breakpoint-up(sm) {
      grid-template-columns: repeat(4, auto);
    }

    @include media-breakpoint-only(md) {
      grid-template-columns: $template-columns-md;
    }

    @include media-breakpoint-only(lg) {
      grid-column-gap: $form-column-gap;
    }

    @include media-breakpoint-up(xl) {
      grid-template-columns: $template-columns-md;
    }
  }

  &__fieldset--package {
    $template-columns-md: repeat(5, 100px) 1fr;
    $row-gap-md: 10px;

    margin-bottom: 20px;
    padding: 20px;
    grid-template-columns: repeat(2, 1fr);
    grid-column-gap: $form-column-gap;
    box-shadow: 0 0 10px rgba($black-color, 0.15);
    border-radius: $border-radius;

    @include media-breakpoint-up(sm) {
      grid-template-columns: repeat(3, 1fr);
    }

    @include media-breakpoint-only(md) {
      padding: 0;
      grid-template-columns: $template-columns-md;
      grid-row-gap: $row-gap-md;
      box-shadow: none;
      border-radius: none;
    }

    @include media-breakpoint-up(xl) {
      padding: 0;
      grid-template-columns: $template-columns-md;
      grid-row-gap: $row-gap-md;
      box-shadow: none;
      border-radius: none;
    }
  }

  &__fieldset--auto-part {
    margin-bottom: 10px;
    grid-template-columns: 1fr minmax(80px, min-content);
    grid-column-gap: 20px;

    &:last-of-type {
      margin-bottom: 20px;
    }

    @include media-breakpoint-up(md) {
      grid-template-columns: 330px auto;
    }
  }

  &__fieldset--boxing {
    $template-columns-md: repeat(3, minmax(max-content, auto));
    $column-gap-md: 35px;
    $row-gap-md: 35px;

    grid-row-gap: 10px;
    grid-template-columns: 1fr;

    @include media-breakpoint-up(sm) {
      grid-template-columns: repeat(2, 1fr);
      grid-row-gap: 15px;
    }

    @include media-breakpoint-only(md) {
      grid-template-columns: $template-columns-md;
      grid-column-gap: $column-gap-md;
      grid-row-gap: $row-gap-md;
    }

    @include media-breakpoint-up(xl) {
      grid-template-columns: $template-columns-md;
      grid-column-gap: $column-gap-md;
      grid-row-gap: $row-gap-md;
    }
  }

  &__error {
    grid-column: 1 / -1;
    font-family: $font-family--secondary;
    font-size: 14px;
    line-height: 1.4;
    color: $red-color;
  }

  &__field {
    //margin-bottom: 15px;
    display: flex;
    flex-direction: column;

    &--span-2 {
      @include media-breakpoint-up(sm) {
        grid-column: span 2;
      }
    }

    &--align-center {
      align-items: center;

      @include media-breakpoint-only(md) {
        align-items: flex-start;
      }

      @include media-breakpoint-up(xl) {
        align-items: flex-start;
      }
    }
  }

  &__label {
    margin-bottom: 0.25em;
    display: block;
    font-family: $font-family--secondary;
    font-size: 14px;
    line-height: 1.4;
    color: $font-color;

    &--light {
      color: rgba($black-color, 0.4);
    }

    &--full {
      grid-column: 1 / -1;
    }
  }

  &__heading {
    margin: 0;
    font-family: $font-family--secondary;
    font-size: 22px;
    line-height: 1;
    font-weight: 500;

    &:not(&--no-mgb) {
      margin-bottom: 25px;
    }

    &--full {
      grid-column: 1 / -1;
    }

    .form__fieldset--goods-type & {
      grid-column: 1 / -1;

      @include media-breakpoint-only(md) {
        grid-column: unset;
      }

      @include media-breakpoint-up(xl) {
        grid-column: unset;
      }
    }
  }

  &__details {
    margin: 40px 0 60px 0;
    font-family: $font-family--secondary;
    font-size: 15px;
    line-height: 1.4;

    dd {
      margin-top: 5px;
      margin-left: 0;
      color: $gray-dark-color;
    }
  }

  &__refresh {
    @include btn-default();
    align-self: end;

    opacity: 0.1;

    @include hover {
      opacity: 0.3;
    }

    @include media-breakpoint-only(md) {
      align-self: center;
    }

    @include media-breakpoint-only(xl) {
      align-self: center;
    }
  }

  &__help-text {
    margin: 50px 0 0 0;
    font-family: $font-family--secondary;
    font-size: 18px;
    line-height: 1.2;
    
    &--gray {
      color: #B3B3B3;
    }

    &--align-center {
      text-align: center;
    }
  }

  [data-content] {
    display: none;
    opacity: 0;

    &.active {
      display: block;

      animation-name: fade-in;
      animation-duration: 0.5s;
      animation-fill-mode: forwards;
    }
  }
}
